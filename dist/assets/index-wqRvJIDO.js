(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function p(t,e,n=!1){let r=5;const o=n?1:0;for(let s=0;s<e.length;s++)for(let c=s+o;c<e.length;c++){const i=e[s]*e[c],a=Math.abs(t-i);if(a===0)return 0;a<r&&(r=a)}return r}function g(t,e){return Math.floor(Math.random()*(e-t))+t}function y(t=0,e=1){const n=1-Math.random(),r=Math.random();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*r)*e+t}function L(t,e){const[n,r]=e,o=Math.round(t);return o<n?n:o>r?r:o}function D(t){t.classList.add("animate"),t.addEventListener("animationend",()=>{t.classList.remove("animate")},{once:!0})}function T(t){const{numberToFocusOn:e,focusStrength:n,targetRange:r}=t,o=e[Math.floor(Math.random()*e.length)],s=y(o,n);return L(s,r)}function l(t){const{gameSettings:e}=t,{activeButtonsValues:n}=t.sessionData,{targetRange:r,numberToFocusOn:o,singleUse:s}=e;let c=g(...r);Object.is(o,null)||(c=T(e));let i=p(c,n,s);return[c,i]}function b(t){const{gameSettings:e}=t,{targetElement:n}=t.DOMElements,{targetNumbers:r}=e;let o=1e3,[s,c]=l(t);if(r==="exact-results")for(;c!=0||o===0;)[s,c]=l(t),o-=1;else if(r==="non-exact-results")for(;c===0||o===0;)[s,c]=l(t),o-=1;const i=n.querySelector(".target-number");i.innerHTML=`<p>${s}</p>`,t.sessionData.currTarget=s}function B(t,e){const{newgameButtons:n}=t.DOMElements;n.forEach(r=>{r.addEventListener("click",()=>{r.parentElement.parentElement.close(),e(t)})})}function N(t,e){t.textContent=`${e}`,D(t)}function P(t,e){const{numberButtons:n}=t.DOMElements;n.forEach(o=>{const{inputNumbers:s}=t.DOMElements;o.addEventListener("click",()=>{const c=parseInt(o.value),{currentInputIndex:i}=t.sessionData,a=s[i];N(a,c),t.sessionData.currProduct*=c,t.gameSettings.singleUse&&(o.disabled=!0),t.sessionData.currentInputIndex+=1,t.sessionData.currentInputIndex>=2&&(C(t),z(t),e(t))})})}function R(t,e,n){const{resetButton:r}=t.DOMElements;B(t,e),P(t,n),r.addEventListener("click",()=>{d(t),m(t)})}function q(t){const{currProduct:e,currTarget:n,activeButtonsValues:r}=t.sessionData,{singleUse:o}=t.gameSettings,s=Math.abs(e-n),c=p(n,r,o),i=s-c;return{points:i>5?5:i,smallestDifference:c}}function w(t){const{gameoverModal:e}=t.DOMElements,{totalPoints:n,minimalPossibleTotalPoints:r}=t.sessionData,o=e.querySelector(".gameover-text");o.innerHTML=`Obtuviste ${n} puntos, el puntaje m√°s bajo posible era ${r}.`}function x(t,e){const{targetElement:n}=e,r=n.querySelector(".added-points");t===0&&r.classList.add("perfect"),r.innerHTML=`<p>+${t}</p>`,n.classList.add("animate"),n.addEventListener("animationend",()=>{n.classList.remove("animate"),r.classList.remove("perfect")},{once:!0})}function A(t,e){const{gameSettings:n}=t,{round:r}=t.sessionData;d(t),m(t),r<n.numberOfRounds-1?(_(t),b(t)):e(t)}function C(t){const{currProduct:e}=t.sessionData,{multiplicationResult:n}=t.DOMElements;n.innerText=e.toString(),D(n)}function V(t){const{round:e,lastAddedPoints:n}=t.sessionData,{roundIndicatorContainer:r}=t.DOMElements,o=r.querySelectorAll(".indicator");n===0&&o[e].classList.add("perfect"),o[e].classList.add("done")}function _(t){V(t),t.sessionData.round+=1}function d(t){return t.DOMElements.inputNumbers.forEach(e=>e.textContent=""),t.sessionData.currentInputIndex=0,t.sessionData.currProduct=1,t}function M(t,e){const{timerElement:n}=t.DOMElements,{timerID:r}=t.sessionData,{gameSettings:o}=t;clearTimeout(r),n.setAttribute("style",`--duration: ${o.time}s`),n.style.animationName="none",n.offsetWidth,n.style.animationName="timer",t.sessionData.timerID=setTimeout(()=>{e(t)},o.time*1e3)}function F(t){const{roundIndicatorContainer:e}=t;e.querySelectorAll(".indicator").forEach(r=>r.classList.remove("done"))}function G(t){t.sessionData.activeButtonsValues=h()}function h(){const t=document.querySelectorAll(".number-btn:not([disabled])");return Array.from(t).map(e=>parseInt(e.value))}function m(t){const{numberButtons:e}=t.DOMElements,{disabledNumbers:n}=t.gameSettings;e.forEach(o=>{o.disabled=n.includes(parseInt(o.value))})}function H(t){const{roundIndicatorContainer:e}=t.DOMElements,n="<div class='indicator'></div>".repeat(t.gameSettings.numberOfRounds);e.innerHTML=n}function $(){return{numberOfRounds:5,time:15,targetRange:[10,144],disabledNumbers:[1,2,5,10],singleUse:!0,targetNumbers:"all",numberToFocusOn:null,focusStrength:1,timeFunction:"constant",resultFeedback:!1}}function U(){const t=document.querySelector(".multiplication-result"),e=document.querySelectorAll(".input-number"),n=document.querySelectorAll(".number-btn"),r=document.querySelector(".reset-btn"),o=document.querySelector(".target-container"),s=document.querySelectorAll(".newgame-btn"),c=document.getElementById("gameover-modal"),i=document.querySelector(".timer"),a=document.querySelector(".rounds-indicators"),v=[o,i,r,a,t],O=[n,e,s];if(v.some(u=>!(u instanceof HTMLElement)))throw new Error("One or more HTMLElements are not in the DOM");if(O.some(u=>!(u instanceof NodeList)))throw new Error("One or more NodeList are not in the DOM");return{multiplicationResult:t,targetElement:o,timerElement:i,resetButton:r,roundIndicatorContainer:a,numberButtons:n,inputNumbers:e,newgameButtons:s,gameoverModal:c}}function E(){return{round:0,currentInputIndex:0,currProduct:1,currTarget:1,lastAddedPoints:0,totalPoints:0,minimalPossibleTotalPoints:0,timerID:void 0,delay:300,activeButtonsValues:h()}}function j(){document.getElementById("instructions-modal").showModal()}function k(t){let e={sessionData:E(),DOMElements:U(),gameSettings:t};return R(e,I,f),e}function I(t){t.sessionData=E(),H(t),F(t.DOMElements),m(t),G(t),M(t,f),d(t),b(t)}function f(t){M(t,f),setTimeout(()=>{A(t,W)},t.sessionData.delay)}function z(t){const{points:e,smallestDifference:n}=q(t);t.sessionData.lastAddedPoints=e,t.sessionData.minimalPossibleTotalPoints+=n,x(e,t.DOMElements)}function W(t){const{gameoverModal:e,timerElement:n}=t.DOMElements,{timerID:r}=t.sessionData;w(t),e.showModal(),clearTimeout(r),n.style.visibility="hidden",n.style.animationName="none",n.offsetWidth}document.addEventListener("DOMContentLoaded",()=>{const t=$();let e=k(t);j(),I(e)});
